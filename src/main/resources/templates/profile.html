<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>
    <link rel="stylesheet" href="/css/profileStyle.css">
</head>
<body>
<div class="profile-container">

    <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>

    <div class="error" th:if="${error}" th:text="${error}"></div>
    <div class="success" th:if="${success}" th:text="${success}"></div>

    <form id="profile-form" class="profile-form"  th:action="@{/profile/save}" th:object="${userProfileDTO}" method="post">
        <div class="section">
            <div class="divider"></div>

            <div class="field-row">
                <div class="field-group">
                    <label>–ò–º—è</label>
                    <input type="text" th:field="*{firstName}" required/>
                </div>
                <div class="field-group">
                    <label>–§–∞–º–∏–ª–∏—è</label>
                    <input type="text" th:field="*{lastName}" required/>
                </div>
            </div>

            <div class="field-group">
                <label>–û—Ç—á–µ—Å—Ç–≤–æ</label>
                <input type="text" th:field="*{middleName}"/>
            </div>
        </div>

        <div class="section">
            <div class="field-group">
                <label>Email</label>
                <input type="email" th:field="*{email}" required/>
            </div>
        </div>

        <div class="section">
            <label>–ü–∞—Ä–æ–ª—å</label>

            <!-- –ü–æ–ª–µ —Å —Ç–æ—á–∫–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–æ–π "–ò–∑–º–µ–Ω–∏—Ç—å" -->
            <div class="password-container" id="password-display">
                <input type="password" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" readonly>
                <button type="button" class="edit-btn" onclick="toggleEdit()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
            </div>

            <!-- –ë–ª–æ–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
            <div id="new-password-block" style="display: none;">
                <div class="new-password-input-container">
                    <input type="password" id="new-password" name="newPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å">
                    <button type="button" class="eye-btn" onclick="togglePasswordVisibility()">üëÅÔ∏è</button>
                </div>
                <button type="button" class="cancel-btn" onclick="toggleEdit()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>

        <div class="section">
            <div class="field-row">
                <div class="field-group">
                    <label>–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" th:field="*{birthday}">
                </div>

                <div class="field-group">
                    <label>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</label>
                    <input type="text"
                           th:value="${#temporals.format(userProfileDTO.dateCreated, 'dd.MM.yyyy HH:mm:ss')}"
                           readonly>
                </div>
            </div>
        </div>

        <div class="divider"></div>
    </form>


    <div class="actions-container">
        <a th:href="@{/tasks}" class="back-btn">‚¨Ö –ù–∞–∑–∞–¥</a>

        <div class="right-buttons">
            <form th:action="@{/profile/delete}" method="post" style="display: inline-block; margin: 0;"
                  onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.')">

                <button type="submit" class="delete-btn">–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
            </form>

            <button type="submit" form="profile-form" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

</div>

<script th:src="@{/js/profile.js}"></script>

</body>
</html>